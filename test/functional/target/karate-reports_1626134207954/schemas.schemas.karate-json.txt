{"failedCount":0,"prefixedPath":"schemas\/schemas.feature","packageQualifiedName":"schemas.schemas","loopIndex":-1,"relativePath":"schemas\/schemas.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":331878,"millis":0.331878,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":10391287,"millis":10.391287,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":1444321,"millis":1.444321,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":9781028,"millis":9.781028,"status":"passed"},"step":{"endLine":15,"comments":["# A schema can be created with either a organization owner or a user owner"],"line":11,"prefix":"*","index":0,"text":"table schemas","table":[{"line":12,"row":["currentUserEmail","name","label","organizationOwnerName","userOwnerEmail"]},{"line":13,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","\"The Daisy Blog\"","null","\"test_daisy@test.whitebrick.com\""]},{"line":14,"row":["\"test_donna@test.whitebrick.com\"","\"test_org_admins\"","\"Test with Org Admins\"","\"test_admins-org\"","null"]},{"line":15,"row":["\"test_debbie@test.whitebrick.com\"","\"test_donnas_org_non_admin\"","\"Test with Donnas Media Non-Admin\"","\"test_donnas-media\"","null"]}]}},{"result":{"nanos":773935859,"millis":773.935859,"status":"passed"},"step":{"line":16,"prefix":"*","index":1,"text":"def result = call read(\"schema-create.feature\") schemas"},"callResults":[{"prefixedPath":"schemas\/schema-create.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":504.26418,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","name":"test_the_daisy_blog","userOwnerEmail":"test_daisy@test.whitebrick.com","label":"The Daisy Blog"},"failedCount":0,"packageQualifiedName":"schemas.schema-create","relativePath":"schemas\/schema-create.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":19090,"millis":0.01909,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":593023,"millis":0.593023,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":13877243,"millis":13.877243,"status":"passed"},"step":{"comments":["# Could not get ##(<var>) working, below is work around for an empty organization\/user owner https:\/\/github.com\/intuit\/karate\/issues\/145"],"background":true,"line":7,"prefix":"*","index":2,"text":"def organizationOwnerNameChk = typeof organizationOwnerName == \"undefined\" ? null : organizationOwnerName"}},{"result":{"nanos":177455,"millis":0.177455,"status":"passed"},"step":{"endLine":17,"line":9,"prefix":"Given","docString":"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\n    name,\n    label\n  }\n}","index":0,"text":"text query ="}},{"result":{"nanos":41614765,"millis":41.614765,"status":"passed"},"step":{"line":18,"prefix":"And","index":1,"text":"def variables = {name: \"#(name)\", label: \"#(label)\", organizationOwnerName: \"##(organizationOwnerNameChk)\"}"}},{"result":{"nanos":106818,"millis":0.106818,"status":"passed"},"step":{"line":19,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":7604727,"millis":7.604727,"status":"passed"},"step":{"line":20,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\"} }"}},{"result":{"nanos":440252148,"millis":440.252148,"status":"passed"},"step":{"line":21,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:56:43.904 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 280\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"name\":\"test_the_daisy_blog\",\"label\":\"The Daisy Blog\"},\"query\":\"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\\n    name,\\n    label\\n  }\\n}\"}\n\n19:56:44.060 response time in milliseconds: 153\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 84\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbCreateSchema\":{\"name\":\"test_the_daisy_blog\",\"label\":\"The Daisy Blog\"}}}\n"},{"result":{"nanos":18911,"millis":0.018911,"status":"passed"},"step":{"line":22,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":8,"name":"Create a schema","description":"","durationMillis":504.26418,"startTime":1626134203556,"failed":false,"refId":"[1:8]","endTime":1626134204062,"exampleIndex":-1}],"name":"","passedCount":1},{"prefixedPath":"schemas\/schema-create.feature","loopIndex":1,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":94.063057,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","name":"test_org_admins","organizationOwnerName":"test_admins-org","label":"Test with Org Admins"},"failedCount":0,"packageQualifiedName":"schemas.schema-create","relativePath":"schemas\/schema-create.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":19894,"millis":0.019894,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":528602,"millis":0.528602,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":754133,"millis":0.754133,"status":"passed"},"step":{"comments":["# Could not get ##(<var>) working, below is work around for an empty organization\/user owner https:\/\/github.com\/intuit\/karate\/issues\/145"],"background":true,"line":7,"prefix":"*","index":2,"text":"def organizationOwnerNameChk = typeof organizationOwnerName == \"undefined\" ? null : organizationOwnerName"}},{"result":{"nanos":165567,"millis":0.165567,"status":"passed"},"step":{"endLine":17,"line":9,"prefix":"Given","docString":"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\n    name,\n    label\n  }\n}","index":0,"text":"text query ="}},{"result":{"nanos":900105,"millis":0.900105,"status":"passed"},"step":{"line":18,"prefix":"And","index":1,"text":"def variables = {name: \"#(name)\", label: \"#(label)\", organizationOwnerName: \"##(organizationOwnerNameChk)\"}"}},{"result":{"nanos":21150,"millis":0.02115,"status":"passed"},"step":{"line":19,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":423287,"millis":0.423287,"status":"passed"},"step":{"line":20,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\"} }"}},{"result":{"nanos":91236966,"millis":91.236966,"status":"passed"},"step":{"line":21,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:56:44.075 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 324\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"name\":\"test_org_admins\",\"organizationOwnerName\":\"test_admins-org\",\"label\":\"Test with Org Admins\"},\"query\":\"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\\n    name,\\n    label\\n  }\\n}\"}\n\n19:56:44.163 response time in milliseconds: 88\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 86\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbCreateSchema\":{\"name\":\"test_org_admins\",\"label\":\"Test with Org Admins\"}}}\n"},{"result":{"nanos":13353,"millis":0.013353,"status":"passed"},"step":{"line":22,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":8,"name":"Create a schema","description":"","durationMillis":94.063057,"startTime":1626134204069,"failed":false,"refId":"[1:8]","endTime":1626134204164,"exampleIndex":-1}],"name":"","passedCount":1},{"prefixedPath":"schemas\/schema-create.feature","loopIndex":2,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":98.7176,"callArg":{"currentUserEmail":"test_debbie@test.whitebrick.com","name":"test_donnas_org_non_admin","organizationOwnerName":"test_donnas-media","label":"Test with Donnas Media Non-Admin"},"failedCount":0,"packageQualifiedName":"schemas.schema-create","relativePath":"schemas\/schema-create.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":44253,"millis":0.044253,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":347241,"millis":0.347241,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":272613,"millis":0.272613,"status":"passed"},"step":{"comments":["# Could not get ##(<var>) working, below is work around for an empty organization\/user owner https:\/\/github.com\/intuit\/karate\/issues\/145"],"background":true,"line":7,"prefix":"*","index":2,"text":"def organizationOwnerNameChk = typeof organizationOwnerName == \"undefined\" ? null : organizationOwnerName"}},{"result":{"nanos":77754,"millis":0.077754,"status":"passed"},"step":{"endLine":17,"line":9,"prefix":"Given","docString":"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\n    name,\n    label\n  }\n}","index":0,"text":"text query ="}},{"result":{"nanos":755983,"millis":0.755983,"status":"passed"},"step":{"line":18,"prefix":"And","index":1,"text":"def variables = {name: \"#(name)\", label: \"#(label)\", organizationOwnerName: \"##(organizationOwnerNameChk)\"}"}},{"result":{"nanos":29522,"millis":0.029522,"status":"passed"},"step":{"line":19,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":422383,"millis":0.422383,"status":"passed"},"step":{"line":20,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\"} }"}},{"result":{"nanos":96754274,"millis":96.754274,"status":"passed"},"step":{"line":21,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:56:44.179 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_debbie@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 348\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"name\":\"test_donnas_org_non_admin\",\"organizationOwnerName\":\"test_donnas-media\",\"label\":\"Test with Donnas Media Non-Admin\"},\"query\":\"mutation ($name: String!, $label: String!, $organizationOwnerName: String){\\n  wbCreateSchema(name: $name, label: $label, organizationOwnerName: $organizationOwnerName) {\\n    name,\\n    label\\n  }\\n}\"}\n\n19:56:44.269 response time in milliseconds: 89\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 108\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbCreateSchema\":{\"name\":\"test_donnas_org_non_admin\",\"label\":\"Test with Donnas Media Non-Admin\"}}}\n"},{"result":{"nanos":13577,"millis":0.013577,"status":"passed"},"step":{"line":22,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":8,"name":"Create a schema","description":"","durationMillis":98.7176,"startTime":1626134204171,"failed":false,"refId":"[1:8]","endTime":1626134204270,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":13034118,"millis":13.034118,"status":"passed"},"step":{"line":17,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":8,"name":"Anyone signed-in can create a schema","description":"","durationMillis":808.918491,"startTime":1626134203318,"failed":false,"refId":"[1:8]","endTime":1626134204284,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":22504,"millis":0.022504,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":262883,"millis":0.262883,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":174316,"millis":0.174316,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":42989068,"millis":42.989068,"status":"passed"},"step":{"line":20,"prefix":"*","index":0,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:56:44.309 command: [bash, report_permissions.bash], working dir: null\n19:56:44.333 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:56:44.334 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"},{"result":{"nanos":2832967,"millis":2.832967,"status":"passed"},"step":{"endLine":25,"line":21,"prefix":"*","index":1,"text":"table schemaUsers","table":[{"line":22,"row":["currentUserEmail","schemaName","userEmails","roleName"]},{"line":23,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_donna@test.whitebrick.com\"]","\"schema_manager\""]},{"line":24,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_debbie@test.whitebrick.com\"]","\"schema_reader\""]},{"line":25,"row":["\"test_donna@test.whitebrick.com\"","\"test_org_admins\"","[\"test_debbie@test.whitebrick.com\"]","\"schema_administrator\""]}]}},{"result":{"nanos":377174984,"millis":377.174984,"status":"passed"},"step":{"line":26,"prefix":"*","index":2,"text":"def result = call read(\"schema-set-users-role.feature\") schemaUsers"},"callResults":[{"prefixedPath":"schemas\/schema-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":113.323041,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_donna@test.whitebrick.com"],"roleName":"schema_manager","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"schemas.schema-set-users-role","relativePath":"schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":27647,"millis":0.027647,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":525034,"millis":0.525034,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":124915,"millis":0.124915,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":2628703,"millis":2.628703,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":31076,"millis":0.031076,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":408459,"millis":0.408459,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":14358,"millis":0.014358,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":109543632,"millis":109.543632,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:56:44.357 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 311\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_donna@test.whitebrick.com\"],\"roleName\":\"schema_manager\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:56:44.464 response time in milliseconds: 106\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":19217,"millis":0.019217,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":113.323041,"startTime":1626134204350,"failed":false,"refId":"[1:7]","endTime":1626134204464,"exampleIndex":-1}],"name":"","passedCount":1},{"prefixedPath":"schemas\/schema-set-users-role.feature","loopIndex":1,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":115.987731,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_debbie@test.whitebrick.com"],"roleName":"schema_reader","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"schemas.schema-set-users-role","relativePath":"schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":17943,"millis":0.017943,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":280718,"millis":0.280718,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":86410,"millis":0.08641,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":501664,"millis":0.501664,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":32541,"millis":0.032541,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":274692,"millis":0.274692,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":12193,"millis":0.012193,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":114769720,"millis":114.76972,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:56:44.473 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 311\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_debbie@test.whitebrick.com\"],\"roleName\":\"schema_reader\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:56:44.585 response time in milliseconds: 112\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":11850,"millis":0.01185,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":115.987731,"startTime":1626134204470,"failed":false,"refId":"[1:7]","endTime":1626134204586,"exampleIndex":-1}],"name":"","passedCount":1},{"prefixedPath":"schemas\/schema-set-users-role.feature","loopIndex":2,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":123.663286,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","userEmails":["test_debbie@test.whitebrick.com"],"roleName":"schema_administrator","schemaName":"test_org_admins"},"failedCount":0,"packageQualifiedName":"schemas.schema-set-users-role","relativePath":"schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":22620,"millis":0.02262,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":324394,"millis":0.324394,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":135399,"millis":0.135399,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":811151,"millis":0.811151,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":27661,"millis":0.027661,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":357597,"millis":0.357597,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":19955,"millis":0.019955,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":121953221,"millis":121.953221,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:56:44.595 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 314\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_debbie@test.whitebrick.com\"],\"roleName\":\"schema_administrator\",\"schemaName\":\"test_org_admins\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:56:44.714 response time in milliseconds: 119\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":11288,"millis":0.011288,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":123.663286,"startTime":1626134204591,"failed":false,"refId":"[1:7]","endTime":1626134204715,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":1145344,"millis":1.145344,"status":"passed"},"step":{"line":27,"prefix":"*","index":3,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":19,"name":"Schema admins can add users to schemas","description":"","durationMillis":424.602066,"startTime":1626134204291,"failed":false,"refId":"[2:19]","endTime":1626134204717,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":18559,"millis":0.018559,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":221559,"millis":0.221559,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":133010,"millis":0.13301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":18508823,"millis":18.508823,"status":"passed"},"step":{"line":30,"prefix":"*","index":0,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:56:44.722 command: [bash, report_permissions.bash], working dir: null\n19:56:44.738 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:56:44.739 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"},{"result":{"nanos":582251,"millis":0.582251,"status":"passed"},"step":{"endLine":33,"line":31,"prefix":"*","index":1,"text":"table schemaUsers","table":[{"line":32,"row":["currentUserEmail","schemaName","userEmails","roleName"]},{"line":33,"row":["\"test_debbie@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_nick_north@test.whitebrick.com\"]","\"schema_reader\""]}]}},{"result":{"nanos":103932004,"millis":103.932004,"status":"passed"},"step":{"line":34,"prefix":"*","index":2,"text":"def result = call read(\"schema-set-users-role.feature\") schemaUsers"},"callResults":[{"prefixedPath":"schemas\/schema-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":96.993446,"callArg":{"currentUserEmail":"test_debbie@test.whitebrick.com","userEmails":["test_nick_north@test.whitebrick.com"],"roleName":"schema_reader","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"schemas.schema-set-users-role","relativePath":"schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":17978,"millis":0.017978,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":264382,"millis":0.264382,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":89624,"millis":0.089624,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":655269,"millis":0.655269,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":23847,"millis":0.023847,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":266008,"millis":0.266008,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":12073,"millis":0.012073,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":95654189,"millis":95.654189,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:56:44.751 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_debbie@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 315\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_nick_north@test.whitebrick.com\"],\"roleName\":\"schema_reader\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:56:44.843 response time in milliseconds: 90\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < vary: origin,accept-encoding\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:56:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n1 < Transfer-Encoding: chunked\n{\"data\":{\"wbSetSchemaUsersRole\":null},\"errors\":[{\"path\":[\"wbSetSchemaUsersRole\"],\"extensions\":{\"exception\":{\"stacktrace\":[\"Error: You do not have permission to Manage Access to this Database. Values: userEmail=test_debbie@test.whitebrick.com, userId=21749, objectId=30735, userAction=manage_access_to_schema, checkedForRoleName=schema_reader, checkedAt=Mon Jul 12 2021 19:56:44 GMT-0400 (Eastern Daylight Time)\",\"    at apolloErr (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:5373:12)\",\"    at WhitebrickCloud.err (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:4032:16)\",\"    at \\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:3543:39\",\"    at Generator.next (<anonymous>)\",\"    at fulfilled (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:3431:58)\",\"    at runMicrotasks (<anonymous>)\",\"    at processTicksAndRejections (node:internal\\\/process\\\/task_queues:94:5)\"],\"wbCode\":\"WB_FORBIDDEN\"},\"code\":\"FORBIDDEN\",\"wbCode\":\"WB_FORBIDDEN\"},\"nodes\":[{\"loc\":{\"start\":79,\"end\":170},\"directives\":[],\"kind\":\"Field\",\"name\":{\"loc\":{\"start\":79,\"end\":99},\"kind\":\"Name\",\"value\":\"wbSetSchemaUsersRole\"},\"arguments\":[{\"loc\":{\"start\":100,\"end\":123},\"kind\":\"Argument\",\"name\":{\"loc\":{\"start\":100,\"end\":110},\"kind\":\"Name\",\"value\":\"schemaName\"},\"value\":{\"loc\":{\"start\":112,\"end\":123},\"kind\":\"Variable\",\"name\":{\"loc\":{\"start\":113,\"end\":123},\"kind\":\"Name\",\"value\":\"schemaName\"}}},{\"loc\":{\"start\":125,\"end\":148},\"kind\":\"Argument\",\"name\":{\"loc\":{\"start\":125,\"end\":135},\"kind\":\"Name\",\"value\":\"userEmails\"},\"value\":{\"loc\":{\"start\":137,\"end\":148},\"kind\":\"Variable\",\"name\":{\"loc\":{\"start\":138,\"end\":148},\"kind\":\"Name\",\"value\":\"userEmails\"}}},{\"loc\":{\"start\":150,\"end\":169},\"kind\":\"Argument\",\"name\":{\"loc\":{\"start\":150,\"end\":158},\"kind\":\"Name\",\"value\":\"roleName\"},\"value\":{\"loc\":{\"start\":160,\"end\":169},\"kind\":\"Variable\",\"name\":{\"loc\":{\"start\":161,\"end\":169},\"kind\":\"Name\",\"value\":\"roleName\"}}}]}],\"originalError\":{\"stack\":\"Error: You do not have permission to Manage Access to this Database. Values: userEmail=test_debbie@test.whitebrick.com, userId=21749, objectId=30735, userAction=manage_access_to_schema, checkedForRoleName=schema_reader, checkedAt=Mon Jul 12 2021 19:56:44 GMT-0400 (Eastern Daylight Time)\\n    at apolloErr (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:5373:12)\\n    at WhitebrickCloud.err (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:4032:16)\\n    at \\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:3543:39\\n    at Generator.next (<anonymous>)\\n    at fulfilled (\\\/Users\\\/simon\\\/git\\\/whitebrick-cloud\\\/.webpack\\\/service\\\/src\\\/whitebrick-cloud.js:3431:58)\\n    at runMicrotasks (<anonymous>)\\n    at processTicksAndRejections (node:internal\\\/process\\\/task_queues:94:5)\",\"extensions\":{\"code\":\"FORBIDDEN\",\"wbCode\":\"WB_FORBIDDEN\"},\"message\":\"You do not have permission to Manage Access to this Database. Values: userEmail=test_debbie@test.whitebrick.com, userId=21749, objectId=30735, userAction=manage_access_to_schema, checkedForRoleName=schema_reader, checkedAt=Mon Jul 12 2021 19:56:44 GMT-0400 (Eastern Daylight Time)\",\"wbCode\":\"WB_FORBIDDEN\"},\"name\":\"GraphQLError\",\"locations\":[{\"line\":2,\"column\":3}],\"positions\":[79],\"source\":{\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1},\"body\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"},\"message\":\"You do not have permission to Manage Access to this Database. Values: userEmail=test_debbie@test.whitebrick.com, userId=21749, objectId=30735, userAction=manage_access_to_schema, checkedForRoleName=schema_reader, checkedAt=Mon Jul 12 2021 19:56:44 GMT-0400 (Eastern Daylight Time)\"}]}\n"},{"result":{"nanos":10076,"millis":0.010076,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":96.993446,"startTime":1626134204747,"failed":false,"refId":"[1:7]","endTime":1626134204844,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":520359,"millis":0.520359,"status":"passed"},"step":{"line":35,"prefix":"*","index":3,"text":"match each result[*].response contains { errors: \"#present\" }"}},{"result":{"nanos":1051306,"millis":1.051306,"status":"passed"},"step":{"line":36,"prefix":"*","index":4,"text":"match each result[*].response.errors[*].extensions.wbCode == \"WB_FORBIDDEN\""}}],"executorName":"main","line":29,"name":"Schema non-admins can not add users to schemas","description":"","durationMillis":124.967871,"startTime":1626134204720,"failed":false,"refId":"[3:29]","endTime":1626134204846,"exampleIndex":-1}],"callDepth":0,"name":"Schemas","description":"","resultDate":"2021-07-12 07:56:44 PM","durationMillis":1358.488428,"passedCount":3}