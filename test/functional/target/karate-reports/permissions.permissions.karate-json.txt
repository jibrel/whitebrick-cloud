{"failedCount":0,"prefixedPath":"permissions\/permissions.feature","packageQualifiedName":"permissions.permissions","loopIndex":-1,"relativePath":"permissions\/permissions.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":632992,"millis":0.632992,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":11672980,"millis":11.67298,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":1948396,"millis":1.948396,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":83782962,"millis":83.782962,"status":"passed"},"step":{"line":9,"prefix":"*","index":0,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:57:31.653 command: [bash, report_permissions.bash], working dir: null\n19:57:31.675 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:57:31.676 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"},{"result":{"nanos":46357436,"millis":46.357436,"status":"passed"},"step":{"endLine":12,"line":10,"prefix":"*","index":1,"text":"table organizationUsers","table":[{"line":11,"row":["currentUserEmail","organizationName","roleName","userEmails"]},{"line":12,"row":["\"test_donna@test.whitebrick.com\"","\"test_admins-org\"","\"organization_administrator\"","[\"test_nick_north@test.whitebrick.com\"]"]}]}},{"result":{"nanos":582387343,"millis":582.387343,"status":"passed"},"step":{"line":13,"prefix":"*","index":2,"text":"def result = call read(\"..\/organizations\/organization-set-users-role.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/organizations\/organization-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":549.918581,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","organizationName":"test_admins-org","userEmails":["test_nick_north@test.whitebrick.com"],"roleName":"organization_administrator"},"failedCount":0,"packageQualifiedName":"permissions.organizations.organization-set-users-role","relativePath":"permissions\/..\/organizations\/organization-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":26690,"millis":0.02669,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":1009270,"millis":1.00927,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":202669,"millis":0.202669,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($organizationName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetOrganizationUsersRole(organizationName: $organizationName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":11730834,"millis":11.730834,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { organizationName: \"#(organizationName)\", roleName: \"#(roleName)\", userEmails: \"#(userEmails)\" }"}},{"result":{"nanos":129415,"millis":0.129415,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":2242853,"millis":2.242853,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":534546841,"millis":534.546841,"status":"passed"},"step":{"line":18,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:32.111 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 354\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"organizationName\":\"test_admins-org\",\"userEmails\":[\"test_nick_north@test.whitebrick.com\"],\"roleName\":\"organization_administrator\"},\"query\":\"mutation ($organizationName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetOrganizationUsersRole(organizationName: $organizationName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:32.302 response time in milliseconds: 187\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 45\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:32 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetOrganizationUsersRole\":true}}\n"},{"result":{"nanos":30009,"millis":0.030009,"status":"passed"},"step":{"line":19,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set organization role","description":"","durationMillis":549.918581,"startTime":1626134251753,"failed":false,"refId":"[1:7]","endTime":1626134252305,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":25384692,"millis":25.384692,"status":"passed"},"step":{"line":14,"prefix":"*","index":3,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:57:32.308 command: [bash, report_permissions.bash], working dir: null\n19:57:32.330 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:57:32.331 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"},{"result":{"nanos":1482946,"millis":1.482946,"status":"passed"},"step":{"endLine":17,"line":15,"prefix":"*","index":4,"text":"table schemaUsers","table":[{"line":16,"row":["currentUserEmail","schemaName","userEmails"]},{"line":17,"row":["\"test_donna@test.whitebrick.com\"","\"test_org_admins\"","[\"test_nick_north@test.whitebrick.com\"]"]}]}},{"result":{"nanos":118014719,"millis":118.014719,"status":"passed"},"step":{"line":18,"prefix":"*","index":5,"text":"def result = call read(\"..\/schemas\/schema-get-users.feature\") schemaUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-get-users.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":95.532318,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","userEmails":["test_nick_north@test.whitebrick.com"],"schemaName":"test_org_admins"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-get-users","relativePath":"permissions\/..\/schemas\/schema-get-users.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":24113,"millis":0.024113,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"19:57:32.334 over-writing existing variable 'result' with new value: call read(\"..\/schemas\/schema-get-users.feature\") schemaUsers\n"},{"result":{"nanos":572073,"millis":0.572073,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":210564,"millis":0.210564,"status":"passed"},"step":{"endLine":19,"line":8,"prefix":"Given","docString":"query ($schemaName: String!, $userEmails: [String]){\n  wbSchemaUsers(schemaName: $schemaName, userEmails: $userEmails){\n    userEmail\n    role{\n      name\n      impliedFrom\n    }\n  }\n}","index":0,"text":"text query ="}},{"result":{"nanos":1813036,"millis":1.813036,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":21,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\" }"}},{"result":{"nanos":30262,"millis":0.030262,"status":"passed"},"step":{"line":22,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":611227,"millis":0.611227,"status":"passed"},"step":{"line":23,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":92255611,"millis":92.255611,"status":"passed"},"step":{"line":24,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:32.360 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 302\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_nick_north@test.whitebrick.com\"],\"schemaName\":\"test_org_admins\"},\"query\":\"query ($schemaName: String!, $userEmails: [String]){\\n  wbSchemaUsers(schemaName: $schemaName, userEmails: $userEmails){\\n    userEmail\\n    role{\\n      name\\n      impliedFrom\\n    }\\n  }\\n}\"}\n\n19:57:32.448 response time in milliseconds: 88\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 163\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:32 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSchemaUsers\":[{\"role\":{\"name\":\"schema_administrator\",\"impliedFrom\":\"organization_administrator\"},\"userEmail\":\"test_nick_north@test.whitebrick.com\"}]}}\n"},{"result":{"nanos":15432,"millis":0.015432,"status":"passed"},"step":{"line":25,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Get schema users","description":"","durationMillis":95.532318,"startTime":1626134252354,"failed":false,"refId":"[1:7]","endTime":1626134252450,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":17162023,"millis":17.162023,"status":"passed"},"step":{"line":19,"prefix":"*","index":6,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}},{"result":{"nanos":2296478,"millis":2.296478,"status":"passed"},"step":{"line":20,"prefix":"*","index":7,"text":"match result[0].response.data.wbSchemaUsers[0].role.name == \"schema_administrator\""}},{"result":{"nanos":753219,"millis":0.753219,"status":"passed"},"step":{"line":21,"prefix":"*","index":8,"text":"match result[0].response.data.wbSchemaUsers[0].role.impliedFrom == \"organization_administrator\""}}],"executorName":"main","line":8,"name":"Adding new organization admin should implicitly assign schema admin to organization-owned schemas","description":"","durationMillis":891.876186,"startTime":1626134251390,"failed":false,"refId":"[1:8]","endTime":1626134252472,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":32646,"millis":0.032646,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":331289,"millis":0.331289,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":212546,"millis":0.212546,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":519641,"millis":0.519641,"status":"passed"},"step":{"endLine":26,"line":24,"prefix":"*","index":0,"text":"table organizationUsers","table":[{"line":25,"row":["currentUserEmail","organizationName","userEmails"]},{"line":26,"row":["\"test_donna@test.whitebrick.com\"","\"test_admins-org\"","[\"test_daisy@test.whitebrick.com\"]"]}]}},{"result":{"nanos":160831274,"millis":160.831274,"status":"passed"},"step":{"line":27,"prefix":"*","index":1,"text":"def result = call read(\"..\/organizations\/organization-remove-user.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/organizations\/organization-remove-user.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":146.344701,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","organizationName":"test_admins-org","userEmails":["test_daisy@test.whitebrick.com"]},"failedCount":0,"packageQualifiedName":"permissions.organizations.organization-remove-user","relativePath":"permissions\/..\/organizations\/organization-remove-user.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":26450,"millis":0.02645,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":469081,"millis":0.469081,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":156629,"millis":0.156629,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($userEmails: [String]!, $organizationName: String!){\n  wbRemoveUsersFromOrganization(userEmails: $userEmails, organizationName: $organizationName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":652492,"millis":0.652492,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { userEmails: \"#(userEmails)\", organizationName: \"#(organizationName)\"}"}},{"result":{"nanos":24988,"millis":0.024988,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":487555,"millis":0.487555,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":144490720,"millis":144.49072,"status":"passed"},"step":{"line":18,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:32.499 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 271\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"organizationName\":\"test_admins-org\",\"userEmails\":[\"test_daisy@test.whitebrick.com\"]},\"query\":\"mutation ($userEmails: [String]!, $organizationName: String!){\\n  wbRemoveUsersFromOrganization(userEmails: $userEmails, organizationName: $organizationName)\\n}\"}\n\n19:57:32.640 response time in milliseconds: 141\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 48\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:32 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbRemoveUsersFromOrganization\":true}}\n"},{"result":{"nanos":36786,"millis":0.036786,"status":"passed"},"step":{"line":19,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Remove a user from an organization","description":"","durationMillis":146.344701,"startTime":1626134252494,"failed":false,"refId":"[1:7]","endTime":1626134252642,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":636237,"millis":0.636237,"status":"passed"},"step":{"endLine":30,"line":28,"prefix":"*","index":2,"text":"table schemaUsers","table":[{"line":29,"row":["currentUserEmail","schemaName","userEmails"]},{"line":30,"row":["\"test_donna@test.whitebrick.com\"","\"test_org_admins\"","[\"test_daisy@test.whitebrick.com\"]"]}]}},{"result":{"nanos":117626360,"millis":117.62636,"status":"passed"},"step":{"line":31,"prefix":"*","index":3,"text":"def result = call read(\"..\/schemas\/schema-get-users.feature\") schemaUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-get-users.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":107.640888,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","userEmails":["test_daisy@test.whitebrick.com"],"schemaName":"test_org_admins"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-get-users","relativePath":"permissions\/..\/schemas\/schema-get-users.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":22045,"millis":0.022045,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"19:57:32.643 over-writing existing variable 'result' with new value: call read(\"..\/schemas\/schema-get-users.feature\") schemaUsers\n"},{"result":{"nanos":328488,"millis":0.328488,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":117116,"millis":0.117116,"status":"passed"},"step":{"endLine":19,"line":8,"prefix":"Given","docString":"query ($schemaName: String!, $userEmails: [String]){\n  wbSchemaUsers(schemaName: $schemaName, userEmails: $userEmails){\n    userEmail\n    role{\n      name\n      impliedFrom\n    }\n  }\n}","index":0,"text":"text query ="}},{"result":{"nanos":563562,"millis":0.563562,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":21,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\" }"}},{"result":{"nanos":50561,"millis":0.050561,"status":"passed"},"step":{"line":22,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":568765,"millis":0.568765,"status":"passed"},"step":{"line":23,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":105956413,"millis":105.956413,"status":"passed"},"step":{"line":24,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:32.657 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 297\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_daisy@test.whitebrick.com\"],\"schemaName\":\"test_org_admins\"},\"query\":\"query ($schemaName: String!, $userEmails: [String]){\\n  wbSchemaUsers(schemaName: $schemaName, userEmails: $userEmails){\\n    userEmail\\n    role{\\n      name\\n      impliedFrom\\n    }\\n  }\\n}\"}\n\n19:57:32.759 response time in milliseconds: 101\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 30\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:32 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSchemaUsers\":[]}}\n"},{"result":{"nanos":33938,"millis":0.033938,"status":"passed"},"step":{"line":25,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Get schema users","description":"","durationMillis":107.640888,"startTime":1626134252652,"failed":false,"refId":"[1:7]","endTime":1626134252760,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":928785,"millis":0.928785,"status":"passed"},"step":{"line":32,"prefix":"*","index":4,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}},{"result":{"nanos":24333349,"millis":24.333349,"status":"passed"},"step":{"line":33,"prefix":"*","index":5,"text":"assert result[0].response.data.wbSchemaUsers.length == 0"}},{"result":{"nanos":23441588,"millis":23.441588,"status":"passed"},"step":{"line":34,"prefix":"*","index":6,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:57:32.787 command: [bash, report_permissions.bash], working dir: null\n19:57:32.807 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:57:32.809 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"}],"executorName":"main","line":23,"name":"Removing an organization admin should remove implicitly assigned schema admins","description":"","durationMillis":328.893715,"startTime":1626134252478,"failed":false,"refId":"[2:23]","endTime":1626134252809,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":26104,"millis":0.026104,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":314484,"millis":0.314484,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":187528,"millis":0.187528,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":1064306,"millis":1.064306,"status":"passed"},"step":{"endLine":39,"line":37,"prefix":"*","index":0,"text":"table organizationUsers","table":[{"line":38,"row":["currentUserEmail","organizationName","roleName","userEmails"]},{"line":39,"row":["\"test_donna@test.whitebrick.com\"","\"test_admins-org\"","\"organization_user\"","[\"test_nick_north@test.whitebrick.com\"]"]}]}},{"result":{"nanos":155455423,"millis":155.455423,"status":"passed"},"step":{"line":40,"prefix":"*","index":1,"text":"def result = call read(\"..\/organizations\/organization-set-users-role.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/organizations\/organization-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":146.080069,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","organizationName":"test_admins-org","userEmails":["test_nick_north@test.whitebrick.com"],"roleName":"organization_user"},"failedCount":0,"packageQualifiedName":"permissions.organizations.organization-set-users-role","relativePath":"permissions\/..\/organizations\/organization-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":26751,"millis":0.026751,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":408247,"millis":0.408247,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":193720,"millis":0.19372,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($organizationName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetOrganizationUsersRole(organizationName: $organizationName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":788903,"millis":0.788903,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { organizationName: \"#(organizationName)\", roleName: \"#(roleName)\", userEmails: \"#(userEmails)\" }"}},{"result":{"nanos":22466,"millis":0.022466,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":396273,"millis":0.396273,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":144231443,"millis":144.231443,"status":"passed"},"step":{"line":18,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:32.831 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 345\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"organizationName\":\"test_admins-org\",\"userEmails\":[\"test_nick_north@test.whitebrick.com\"],\"roleName\":\"organization_user\"},\"query\":\"mutation ($organizationName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetOrganizationUsersRole(organizationName: $organizationName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:32.972 response time in milliseconds: 140\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 45\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:32 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetOrganizationUsersRole\":true}}\n"},{"result":{"nanos":12266,"millis":0.012266,"status":"passed"},"step":{"line":19,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set organization role","description":"","durationMillis":146.080069,"startTime":1626134252826,"failed":false,"refId":"[1:7]","endTime":1626134252973,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":623076,"millis":0.623076,"status":"passed"},"step":{"line":41,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":36,"name":"Demoting an organization admin to user should remove implicitly assigned schema admins","description":"","durationMillis":157.670921,"startTime":1626134252815,"failed":false,"refId":"[3:36]","endTime":1626134252974,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":19451,"millis":0.019451,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":216640,"millis":0.21664,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":140607,"millis":0.140607,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":23502629,"millis":23.502629,"status":"passed"},"step":{"line":44,"prefix":"*","index":0,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:57:32.979 command: [bash, report_permissions.bash], working dir: null\n19:57:33.000 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:57:33.001 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"}],"executorName":"main","line":43,"name":"Report permissions","description":"","durationMillis":23.879327,"startTime":1626134252977,"failed":false,"refId":"[4:43]","endTime":1626134253002,"exampleIndex":-1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":26245,"millis":0.026245,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":475798,"millis":0.475798,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":245900,"millis":0.2459,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":693556,"millis":0.693556,"status":"passed"},"step":{"endLine":49,"line":47,"prefix":"*","index":0,"text":"table schemaUsers","table":[{"line":48,"row":["currentUserEmail","schemaName","userEmails","roleName"]},{"line":49,"row":["\"test_donna@test.whitebrick.com\"","\"test_org_admins\"","[\"test_donna@test.whitebrick.com\"]","\"schema_administrator\""]}]}},{"result":{"nanos":119307960,"millis":119.30796,"status":"passed"},"step":{"line":50,"prefix":"*","index":1,"text":"def result = call read(\"..\/schemas\/schema-set-users-role.feature\") schemaUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":109.332653,"callArg":{"currentUserEmail":"test_donna@test.whitebrick.com","userEmails":["test_donna@test.whitebrick.com"],"roleName":"schema_administrator","schemaName":"test_org_admins"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-set-users-role","relativePath":"permissions\/..\/schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":23354,"millis":0.023354,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":425069,"millis":0.425069,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":174219,"millis":0.174219,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":781216,"millis":0.781216,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":21250,"millis":0.02125,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":577351,"millis":0.577351,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":21226,"millis":0.021226,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":107297231,"millis":107.297231,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:57:33.023 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_donna@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 313\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_donna@test.whitebrick.com\"],\"roleName\":\"schema_administrator\",\"schemaName\":\"test_org_admins\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:33.127 response time in milliseconds: 104\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:33 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":11737,"millis":0.011737,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":109.332653,"startTime":1626134253018,"failed":false,"refId":"[1:7]","endTime":1626134253128,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":555981,"millis":0.555981,"status":"passed"},"step":{"line":51,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":46,"name":"Setting a role explicitly should remove the implicit flag","description":"","durationMillis":121.30544,"startTime":1626134253006,"failed":false,"refId":"[5:46]","endTime":1626134253129,"exampleIndex":-1},{"sectionIndex":5,"stepResults":[{"result":{"nanos":22731,"millis":0.022731,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":272231,"millis":0.272231,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":152993,"millis":0.152993,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":21209086,"millis":21.209086,"status":"passed"},"step":{"line":54,"prefix":"*","index":0,"text":"karate.exec(\"bash report_permissions.bash\")"},"stepLog":"19:57:33.136 command: [bash, report_permissions.bash], working dir: null\n19:57:33.153 *** functional\/test\/report_permissions.bash: Reporting permissions...\n19:57:33.154 report_permissions.bash: line 4: .\/\/db\/report_permissions.sql: No such file or directory\n"}],"executorName":"main","line":53,"name":"Report permissions","description":"","durationMillis":21.657041,"startTime":1626134253133,"failed":false,"refId":"[6:53]","endTime":1626134253156,"exampleIndex":-1},{"sectionIndex":6,"stepResults":[{"result":{"nanos":19649,"millis":0.019649,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":220965,"millis":0.220965,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":136214,"millis":0.136214,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":2543682,"millis":2.543682,"status":"passed"},"step":{"endLine":60,"line":57,"prefix":"*","index":0,"text":"table organizationUsers","table":[{"line":58,"row":["currentUserEmail","schemaName","userEmails","roleName"]},{"line":59,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_donna@test.whitebrick.com\"]","\"schema_reader\""]},{"line":60,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_debbie@test.whitebrick.com\"]","\"schema_administrator\""]}]}},{"result":{"nanos":232240222,"millis":232.240222,"status":"passed"},"step":{"line":61,"prefix":"*","index":1,"text":"def result = call read(\"..\/schemas\/schema-set-users-role.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":138.871618,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_donna@test.whitebrick.com"],"roleName":"schema_reader","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-set-users-role","relativePath":"permissions\/..\/schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":21758,"millis":0.021758,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":14147720,"millis":14.14772,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":285359,"millis":0.285359,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":1356216,"millis":1.356216,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":32901,"millis":0.032901,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":457063,"millis":0.457063,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":17306,"millis":0.017306,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":122543582,"millis":122.543582,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:57:33.192 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 310\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_donna@test.whitebrick.com\"],\"roleName\":\"schema_reader\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:33.311 response time in milliseconds: 119\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:33 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":9713,"millis":0.009713,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":138.871618,"startTime":1626134253173,"failed":false,"refId":"[1:7]","endTime":1626134253312,"exampleIndex":-1}],"name":"","passedCount":1},{"prefixedPath":"permissions\/..\/schemas\/schema-set-users-role.feature","loopIndex":1,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":80.339008,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_debbie@test.whitebrick.com"],"roleName":"schema_administrator","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-set-users-role","relativePath":"permissions\/..\/schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":12087,"millis":0.012087,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":215446,"millis":0.215446,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":52248,"millis":0.052248,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":617383,"millis":0.617383,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":16802,"millis":0.016802,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":204375,"millis":0.204375,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":9698,"millis":0.009698,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":79199080,"millis":79.19908,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:57:33.318 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 318\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_debbie@test.whitebrick.com\"],\"roleName\":\"schema_administrator\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:33.395 response time in milliseconds: 77\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:33 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":11889,"millis":0.011889,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":80.339008,"startTime":1626134253315,"failed":false,"refId":"[1:7]","endTime":1626134253396,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":461033,"millis":0.461033,"status":"passed"},"step":{"line":62,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":56,"name":"Demote Donna from manager to reader, Promote debbie from reader to administrator","description":"","durationMillis":235.621765,"startTime":1626134253160,"failed":false,"refId":"[7:56]","endTime":1626134253396,"exampleIndex":-1},{"sectionIndex":7,"stepResults":[{"result":{"nanos":496302,"millis":0.496302,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":505764,"millis":0.505764,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":121370,"millis":0.12137,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":256674,"millis":0.256674,"status":"passed"},"step":{"endLine":67,"line":65,"prefix":"*","index":0,"text":"table organizationUsers","table":[{"line":66,"row":["currentUserEmail","schemaName","userEmails"]},{"line":67,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_debbie@test.whitebrick.com\"]"]}]}},{"result":{"nanos":87633455,"millis":87.633455,"status":"passed"},"step":{"line":68,"prefix":"*","index":1,"text":"def result = call read(\"..\/schemas\/schema-remove-user.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-remove-user.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":81.78932,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_debbie@test.whitebrick.com"],"schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-remove-user","relativePath":"permissions\/..\/schemas\/schema-remove-user.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":27048,"millis":0.027048,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":256250,"millis":0.25625,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":56107,"millis":0.056107,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!){\n  wbRemoveSchemaUsers(schemaName: $schemaName, userEmails: $userEmails)\n}","index":0,"text":"text query ="}},{"result":{"nanos":472101,"millis":0.472101,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\"}"}},{"result":{"nanos":14510,"millis":0.01451,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":282569,"millis":0.282569,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":80670210,"millis":80.67021,"status":"passed"},"step":{"line":18,"prefix":"When","index":4,"text":"method POST"},"stepLog":"19:57:33.408 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 242\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_debbie@test.whitebrick.com\"],\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!){\\n  wbRemoveSchemaUsers(schemaName: $schemaName, userEmails: $userEmails)\\n}\"}\n\n19:57:33.487 response time in milliseconds: 79\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 38\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:33 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbRemoveSchemaUsers\":true}}\n"},{"result":{"nanos":10525,"millis":0.010525,"status":"passed"},"step":{"line":19,"prefix":"Then","index":5,"text":"status 200"}}],"executorName":"main","line":7,"name":"Remove a user from a schema","description":"","durationMillis":81.78932,"startTime":1626134253406,"failed":false,"refId":"[1:7]","endTime":1626134253488,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":593411,"millis":0.593411,"status":"passed"},"step":{"line":69,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":64,"name":"Remove debbie from schema","description":"","durationMillis":89.606976,"startTime":1626134253398,"failed":false,"refId":"[8:64]","endTime":1626134253489,"exampleIndex":-1},{"sectionIndex":8,"stepResults":[{"result":{"nanos":18468,"millis":0.018468,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":154808,"millis":0.154808,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":102224,"millis":0.102224,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"configure readTimeout = 600000"}},{"result":{"nanos":507258,"millis":0.507258,"status":"passed"},"step":{"endLine":74,"line":72,"prefix":"*","index":0,"text":"table organizationUsers","table":[{"line":73,"row":["currentUserEmail","schemaName","userEmails","roleName"]},{"line":74,"row":["\"test_daisy@test.whitebrick.com\"","\"test_the_daisy_blog\"","[\"test_nick_north@test.whitebrick.com\"]","\"schema_administrator\""]}]}},{"result":{"nanos":118386710,"millis":118.38671,"status":"passed"},"step":{"line":75,"prefix":"*","index":1,"text":"def result = call read(\"..\/schemas\/schema-set-users-role.feature\") organizationUsers"},"callResults":[{"prefixedPath":"permissions\/..\/schemas\/schema-set-users-role.feature","loopIndex":0,"callDepth":1,"description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":113.911266,"callArg":{"currentUserEmail":"test_daisy@test.whitebrick.com","userEmails":["test_nick_north@test.whitebrick.com"],"roleName":"schema_administrator","schemaName":"test_the_daisy_blog"},"failedCount":0,"packageQualifiedName":"permissions.schemas.schema-set-users-role","relativePath":"permissions\/..\/schemas\/schema-set-users-role.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":10847,"millis":0.010847,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":243101,"millis":0.243101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"path endpointPath"}},{"result":{"nanos":60050,"millis":0.06005,"status":"passed"},"step":{"endLine":13,"line":8,"prefix":"Given","docString":"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\n}","index":0,"text":"text query ="}},{"result":{"nanos":423639,"millis":0.423639,"status":"passed"},"step":{"comments":["# Given def query = read(\"test.gql\")"],"line":15,"prefix":"And","index":1,"text":"def variables = { schemaName: \"#(schemaName)\", userEmails: \"#(userEmails)\", roleName: \"#(roleName)\" }"}},{"result":{"nanos":14784,"millis":0.014784,"status":"passed"},"step":{"line":16,"prefix":"And","index":2,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":277884,"millis":0.277884,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request { query: \"#(query)\", variables: \"#(variables)\" }"}},{"result":{"nanos":10397,"millis":0.010397,"status":"passed"},"step":{"line":18,"prefix":"And","index":4,"text":"header X-Test-User-Email = currentUserEmail"}},{"result":{"nanos":112860199,"millis":112.860199,"status":"passed"},"step":{"line":19,"prefix":"When","index":5,"text":"method POST"},"stepLog":"19:57:33.499 request:\n1 > POST http:\/\/localhost:3000\/graphql\n1 > X-Test-User-Email: test_daisy@test.whitebrick.com\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 322\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_66)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"userEmails\":[\"test_nick_north@test.whitebrick.com\"],\"roleName\":\"schema_administrator\",\"schemaName\":\"test_the_daisy_blog\"},\"query\":\"mutation ($schemaName: String!, $userEmails: [String]!, $roleName: String!){\\n  wbSetSchemaUsersRole(schemaName: $schemaName, userEmails: $userEmails, roleName: $roleName)\\n}\"}\n\n19:57:33.610 response time in milliseconds: 111\n1 < 200\n1 < content-type: application\/json; charset=utf-8\n1 < content-length: 39\n1 < vary: origin\n1 < access-control-allow-credentials: true\n1 < access-control-expose-headers: WWW-Authenticate,Server-Authorization\n1 < cache-control: no-cache\n1 < Date: Mon, 12 Jul 2021 23:57:33 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"data\":{\"wbSetSchemaUsersRole\":true}}\n"},{"result":{"nanos":10365,"millis":0.010365,"status":"passed"},"step":{"line":20,"prefix":"Then","index":6,"text":"status 200"}}],"executorName":"main","line":7,"name":"Set schema role","description":"","durationMillis":113.911266,"startTime":1626134253496,"failed":false,"refId":"[1:7]","endTime":1626134253610,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":386333,"millis":0.386333,"status":"passed"},"step":{"line":76,"prefix":"*","index":2,"text":"match each result[*].response contains { errors: \"#notpresent\" }"}}],"executorName":"main","line":71,"name":"Add nick north as administrator for schema","description":"","durationMillis":119.555801,"startTime":1626134253491,"failed":false,"refId":"[9:71]","endTime":1626134253611,"exampleIndex":-1}],"callDepth":0,"name":"Permissions","description":"","resultDate":"2021-07-12 07:57:33 PM","durationMillis":1990.067172,"passedCount":9}